import re
import requests
from bs4 import BeautifulSoup


def requests_proxy():#这个可以测试某个代理的ip情况
	proxies={'61.152.81.193:9100'}

	r=requests.get('http://1212.ip138.com/ic.asp',proxies=proxies)
	html=BeautifulSoup(r.content.decode('GB2312',errors='ignore'),'lxml')

	#regex匹配结果
	ipaddr=re.search(r'(\d{1,3}\.){3}\d{1,3}',html.body.text).group()
	type=re.search(r'(?<=来自：).+',html.body.text).group()

	#return结果
	return (ipaddr,type)
	pass


def main():
	#todo 这里要实现批量测试代理的功能
	pass


if __name__=='__main__':
	print(requests_proxy())
